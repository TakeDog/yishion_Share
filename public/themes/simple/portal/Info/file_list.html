<layout name="public@layout"/>
<style>
.point_link{cursor: pointer;}
</style>

<php>$current_dir = request() -> param('dir');</php>

<div class="container" id="app" style="min-height: 850px;">

    <el-breadcrumb separator-class="el-icon-arrow-right" style="margin:30px 0 20px;font-size:16px;">
        <el-breadcrumb-item v-for="(item,index) in nav" :key="index"><a :href="'{:url('fileList')}?dir=' + item.link" class="point_link">{{item.name}}</a></el-breadcrumb-item>
    </el-breadcrumb>

    <el-table :data="tableData">
        <el-table-column prop="file" label="文件/目录名">
            <template slot-scope="scope">
                <a :href="'{:url('fileList')}?dir={$current_dir}/' + scope.row.file">{{scope.row.file}}</a>
            </template>
        </el-table-column>
        <el-table-column prop="date" label="上传时间"></el-table-column>
    </el-table>
</div>

<script>
    var tableData = JSON.parse('{$fileList}');
    var nav = JSON.parse('{$nav}');
    
    var vue = {
        el:"#app",
        data:{
            tableData,
            nav
        },
        methods: {
            
        }
    }
</script>